{% extends "layout.html" %}
{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>{{ title }}</h2>
    <p class="text-muted">Form: {{ field.form.title }}</p> {# Show parent form title #}
    <hr>

    <hr>
<h4>Add New Field</h4>
<form method="POST" action="{{ url_for('edit_form', form_id=form_data.id) }}" novalidate>
    {{ add_field_form.hidden_tag() }} {# Includes CSRF token #}

    <div class="row g-3 mb-3 align-items-end"> {# Example layout row #}
        {# Label Field #}
        <div class="col-md-4">
            {{ add_field_form.label.label(class="form-label") }} <span class="text-danger">*</span>
            {{ add_field_form.label(class="form-control" + (" is-invalid" if add_field_form.label.errors else "")) }}
            {% if add_field_form.label.errors %}
                <div class="invalid-feedback">
                    {% for error in add_field_form.label.errors %}{{ error }}{% endfor %}
                </div>
            {% endif %}
        </div>

        {# Field Type Select #}
        <div class="col-md-3">
            {{ add_field_form.field_type.label(class="form-label") }} <span class="text-danger">*</span>
            {{ add_field_form.field_type(class="form-select" + (" is-invalid" if add_field_form.field_type.errors else "")) }}
             {% if add_field_form.field_type.errors %}
                <div class="invalid-feedback">
                    {% for error in add_field_form.field_type.errors %}{{ error }}{% endfor %}
                </div>
            {% endif %}
       </div>

        {# Options Field #}
        <div class="col-md-3">
             {{ add_field_form.options.label(class="form-label") }} <small>(comma-separated)</small>
             {{ add_field_form.options(class="form-control" + (" is-invalid" if add_field_form.options.errors else "")) }}
              {% if add_field_form.options.errors %}
                <div class="invalid-feedback">
                    {% for error in add_field_form.options.errors %}{{ error }}{% endfor %}
                </div>
            {% endif %}
        </div>

        {# Required Checkbox #}
         <div class="col-md-auto">
            <div class="form-check mb-1"> {# Adjust alignment/margin as needed #}
                {{ add_field_form.required(class="form-check-input" + (" is-invalid" if add_field_form.required.errors else "")) }}
                {{ add_field_form.required.label(class="form-check-label") }}
                 {% if add_field_form.required.errors %}
                    {# Checkboxes don't have standard invalid-feedback display well #}
                     <small class="text-danger d-block">
                        {% for error in add_field_form.required.errors %}{{ error }}{% endfor %}
                     </small>
                {% endif %}
            </div>
        </div>

        {# Submit Button #}
        <div class="col-md-auto">
            {{ add_field_form.submit(class="btn btn-success") }}
        </div>
    </div> {# End row #}
</form>
    
</div> {# End Container #}
{% endblock %}
